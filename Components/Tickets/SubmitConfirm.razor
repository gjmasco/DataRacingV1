@page "/submit-confirm"
@using DataRacingV1.Components.Dataracing
@using DataRacingV1.Models
@using Microsoft.AspNetCore.Authorization
@using MudBlazor
@inject CsvService CsvService
@attribute [Authorize]

@using System.ComponentModel.DataAnnotations

<MudForm @ref="_form" @bind-IsValid="@success">
    <MudPaper Class="pa-4 mt-6 mb-8">
        <MudText Typo="Typo.h5" GutterBottom>Confirmar el Pedido</MudText>
        <MudDivider Class="my-4" />

        <MudGrid>
            <MudItem xs="12" sm="6">
                <MudText Typo="Typo.subtitle2">Tipo de Vehiculo:</MudText>
                <MudText Typo="Typo.body1">@Tickets.selectedVehicle.TIPO</MudText>
            </MudItem>
            <MudItem xs="12" sm="6">
                <MudText Typo="Typo.subtitle2">Fabricante:</MudText>
                <MudText Typo="Typo.body1">@Tickets.selectedVehicle.FABRICANTE</MudText>
            </MudItem>
            <MudItem xs="12" sm="6">
                <MudText Typo="Typo.subtitle2">Modelo:</MudText>
                <MudText Typo="Typo.body1">@Tickets.selectedVehicle.MODELO</MudText>
            </MudItem>
            <MudItem xs="12" sm="6">
                <MudText Typo="Typo.subtitle2">Variante:</MudText>
                <MudText Typo="Typo.body1">@Tickets.selectedVehicle.VARIANTE</MudText>
            </MudItem>
            <MudItem xs="12">
                <MudText Typo="Typo.subtitle2">Dominio:</MudText>
                <MudText Typo="Typo.body1">@Tickets.VehicleInfo.Dominio</MudText>
            </MudItem>
        </MudGrid>

        <MudDivider Class="my-4" />

        <MudText Typo="Typo.h6" GutterBottom>Modificaciones</MudText>
        <MudText Typo="Typo.subtitle2">Stage:</MudText>
        <MudText Typo="Typo.body1">@Tickets.ModificacionesDetails.StageInstance.Seleccion</MudText>
        <MudText Typo="Typo.subtitle1">_____________________</MudText>
        <MudText Typo="Typo.subtitle1">Opcionales:</MudText>

        @foreach (var modificacion in Tickets.ModificacionesDetails.ModificacionesList.Where(m => m.Selected))
        {
            <MudText Typo="Typo.body1">@modificacion.Nombre</MudText>
        }

        <MudDivider Class="my-4" />

        <MudText Typo="Typo.subtitle2">Costo Total:</MudText>
        <MudText Typo="Typo.h6">@Tickets.Cost</MudText>

        
    </MudPaper>
</MudForm>

@code {
    [Parameter]
    public Ticket Tickets { get; set; }

    private MudForm _form;
    private bool success;


}